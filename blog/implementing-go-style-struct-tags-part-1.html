<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2R87B0XZCL"></script><script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){
          dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-2R87B0XZCL');
      </script><title>Implementing go style "struct tags" in C++ - Part 1 | Rsomething <Personal Blog/></title><meta name="description" content="Rsomething's Personal Blog">
    <link rel="modulepreload" href="/assets/app.b78311c0.js"><link rel="modulepreload" href="/assets/implementing-go-style-struct-tags-part-1.html.becae05c.js"><link rel="modulepreload" href="/assets/implementing-go-style-struct-tags-part-1.html.ac12148f.js"><link rel="prefetch" href="/assets/index.html.3c2c7787.js"><link rel="prefetch" href="/assets/a-new-start.html.3bfc6d59.js"><link rel="prefetch" href="/assets/setjmp-longjmp-in-c-part-1.html.ad726d0c.js"><link rel="prefetch" href="/assets/implementing-another-socket-library-in-cpp-part-1.html.b0bc5e2e.js"><link rel="prefetch" href="/assets/implementing-another-socket-library-in-cpp-part-2.html.f66f073f.js"><link rel="prefetch" href="/assets/implementing-another-socket-library-in-cpp-part-3.html.3df8be2d.js"><link rel="prefetch" href="/assets/implementing-go-style-struct-tags-part-2.html.34d7b5dc.js"><link rel="prefetch" href="/assets/user-defined-literals-in-cpp.html.45c96f36.js"><link rel="prefetch" href="/assets/linear-algebra-the-basics.html.50f1004d.js"><link rel="prefetch" href="/assets/how-to-calculate-motor-rating-for-mobile-robots.html.95bd3b74.js"><link rel="prefetch" href="/assets/resistor-network-for-keypad-calculation.html.e81bdf62.js"><link rel="prefetch" href="/assets/404.html.ce538133.js"><link rel="prefetch" href="/assets/index.html.e5d2d16e.js"><link rel="prefetch" href="/assets/index.html.3f8b9b2e.js"><link rel="prefetch" href="/assets/index.html.f3db06eb.js"><link rel="prefetch" href="/assets/index.html.1f2ed00a.js"><link rel="prefetch" href="/assets/a-new-start.html.e4a43ea9.js"><link rel="prefetch" href="/assets/setjmp-longjmp-in-c-part-1.html.ae103e32.js"><link rel="prefetch" href="/assets/implementing-another-socket-library-in-cpp-part-1.html.836fbdc8.js"><link rel="prefetch" href="/assets/implementing-another-socket-library-in-cpp-part-2.html.81a6540d.js"><link rel="prefetch" href="/assets/implementing-another-socket-library-in-cpp-part-3.html.5a22ca0c.js"><link rel="prefetch" href="/assets/implementing-go-style-struct-tags-part-2.html.6ecd0592.js"><link rel="prefetch" href="/assets/user-defined-literals-in-cpp.html.45d8872f.js"><link rel="prefetch" href="/assets/linear-algebra-the-basics.html.b7018bf4.js"><link rel="prefetch" href="/assets/how-to-calculate-motor-rating-for-mobile-robots.html.6c049e21.js"><link rel="prefetch" href="/assets/resistor-network-for-keypad-calculation.html.20f5eb2b.js"><link rel="prefetch" href="/assets/404.html.9aff8135.js"><link rel="prefetch" href="/assets/index.html.899f9ecc.js"><link rel="prefetch" href="/assets/index.html.29881b68.js"><link rel="prefetch" href="/assets/index.html.841a157d.js"><link rel="prefetch" href="/assets/404.4e9d3fdf.js"><link rel="prefetch" href="/assets/CategoriesLayout.9e31fe91.js"><link rel="prefetch" href="/assets/HomeLayout.bd71f3b3.js"><link rel="prefetch" href="/assets/Layout.ea5b662c.js"><link rel="prefetch" href="/assets/PostLayout.162cfa7c.js"><link rel="prefetch" href="/assets/PostsLayout.decfb82f.js"><link rel="prefetch" href="/assets/SearchLayout.4e333fe7.js"><link rel="prefetch" href="/assets/TagsLayout.0715536d.js">
    <link rel="stylesheet" href="/assets/style.cec478b6.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><header class="theme-header"><a href="/" class="logo-link" style=""><!----><strong class="title">Rsomething &lt;Personal Blog/&gt;</strong></a><!----><nav class="navbar"><i class="iconfont icon-menu menu-btn"></i><ul class="nav-list"><li class="nav-item"><div class="navbar-blogger"><div class="avatar"><img src="/images/avatar.jpg" alt="Avatar" title="Avatar"></div><div class="types"><a href="/categories/?category=all" class="type"><span class="text">Categories</span><span class="num">11</span></a><div class="divider"></div><a href="/tags/?tag=all" class="type"><span class="text">Tags</span><span class="num">13</span></a></div><div class="blogger"><div class="name">Rsomething</div><p class="slogan" title="Personal Blog And Programming Notes.">Personal Blog And Programming Notes.</p></div></div></li><!--[--><!--]--><li class="nav-link nav-item animate__animated animate__slideInRight"><button class="theme-toggle"><i class="icon-sun iconfont"></i></button></li><li class="nav-link nav-item animate__animated animate__slideInRight search-link"><a href="/search/" class="navbar-item"><i class="icon-search iconfont"></i><span class="text">Search</span></a></li><li class="nav-item nav-medias animate__animated animate__slideInRight"><div class="medias"><!--[--><a class="icon-email iconfont" href="mailto:rkm7232@gmail.com" title="email" target="_blank"></a><a class="icon-github iconfont" href="https://github.com/the-this-pointer/" title="github" target="_blank"></a><a class="icon-book iconfont" href="https://the-this-pointer.github.io/my-resume/" title="book" target="_blank"></a><!--]--></div></li></ul></nav></header><main class="theme-container theme-post-container"><div class="theme-content post-container"><div class="post-wrapper"><i class="iconfont icon-book toc-btn"></i><i class="iconfont icon-menu aside-btn"></i><div class="markdown-body"><h1 class="post-title"><span>Implementing go style &quot;struct tags&quot; in C++ - Part 1</span></h1><div class="post-info"><span class="post-info-item"><i class="iconfont icon-avatar" title="Author"></i> Rsomething</span><span class="post-info-item"><i class="iconfont icon-datetime" title="Date"></i> 2022-08-15</span><span class="post-info-item"><i class="iconfont icon-categorynormal" title="Categories"></i><!--[--><a href="/categories/?category=C%2B%2B" class="post-type">C++</a><!--]--></span><span class="post-info-item"><i class="iconfont icon-tag" title="Tags"></i><!--[--><a href="/tags/?tag=programming" class="post-type">programming</a><!--]--></span></div><div><p>If you worked with the Golang programming language before, you have faced the user-created custom types named <code>struct</code>; if you don&#39;t know what&#39;s that, you can read more about it <a href="https://gobyexample.com/structs" target="_blank">here</a>.</p><details class="custom-container details"><p>This is the first article of the series. The list will be updated as soon as new articles are added.</p><blockquote><p><em>Implementing go style struct tags in C++ - Part 1</em></p></blockquote><p><a href="implementing-go-style-struct-tags-part-2.html" target="_blank">Implementing go style &quot;struct tags&quot; in C++ - Part 2</a>.</p></details><h2 id="what-do-we-want-to-do" tabindex="-1"><a class="header-anchor" href="#what-do-we-want-to-do" aria-hidden="true">#</a> What Do We Want To Do?!</h2><p>There is nothing special about the <code>struct</code> itself. It&#39;s the reason I attached a reference link for people who want to learn more about it, and I didn&#39;t mention all of its details here. For the sake of briefness, I point to the main part we are going to do: <strong>&quot;struct tags&quot;</strong>.</p><p>Let&#39;s look at to the sample <code>struct</code> below:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
    age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code is taken from the above link. It&#39;s a struct that holds information about a person! If I want to get a JSON string, I should add some details about the field name in JSON, or If I save it to a database, I should provide information about the column and datatype. The point is it&#39;s straightforward to do that in Golang, and I like that in C++ too!</p><p>The edited code for providing JSON details will be like this:</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span> <span class="token string">`json:&quot;name&quot;`</span>   <span class="token comment">// or &quot;person_name&quot;, who cares!</span>
    age  <span class="token builtin">int</span>    <span class="token string">`json:&quot;age&quot;`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="perspective" tabindex="-1"><a class="header-anchor" href="#perspective" aria-hidden="true">#</a> Perspective</h2><p>I would create a class that can hold some static metadata for the members, and I want to use the metadata to generate a JSON string from that class. Of course, the easy way is using the macros for creating members and saving the data in a variable, but I don&#39;t like it; In other words, even if it is effortless to implement, I hate using macros for this purpose. I want to challenge myself with something new.</p><p>I plan to work with <code>std::any</code> for values and use C++ templates (and specifically <code>std::integer_sequence</code>) to save metadata for each member at compile time. There are some cons about using templates here; if I have two classes with the same members but different metadata, the compiler will create two different classes in compile time, which doesn&#39;t make sense for the programmer!</p><h2 id="implementation" tabindex="-1"><a class="header-anchor" href="#implementation" aria-hidden="true">#</a> Implementation</h2><p>Ok, enough talking! Let me show you what happens with a little example:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;any&gt;</span></span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> chars<span class="token operator">&gt;</span>
<span class="token keyword">using</span> meta_string <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> chars<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> T<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> chars<span class="token operator">&gt;</span>
<span class="token keyword">constexpr</span> meta_string<span class="token operator">&lt;</span>chars<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token string">&quot;&quot;</span><span class="token function">_meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">MetaField</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> elements<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">MetaField</span><span class="token operator">&lt;</span>meta_string<span class="token operator">&lt;</span>elements<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> elements<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token char">&#39;\0&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    MetaField<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token string">&quot;metadata_1&quot;</span>_meta<span class="token punctuation">)</span><span class="token operator">&gt;</span> v1<span class="token punctuation">;</span>
    MetaField<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token string">&quot;metadata_2&quot;</span>_meta<span class="token punctuation">)</span><span class="token operator">&gt;</span> v2<span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;v1 metadata: &quot;</span> <span class="token operator">&lt;&lt;</span> v1<span class="token punctuation">.</span><span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;v2 metadata: &quot;</span> <span class="token operator">&lt;&lt;</span> v2<span class="token punctuation">.</span><span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="output" tabindex="-1"><a class="header-anchor" href="#output" aria-hidden="true">#</a> Output:</h6><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>v1 metadata: metadata_1
v2 metadata: metadata_2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>We implemented a class with some static text for metadata, and from the word &quot;static&quot;, I mean some text linked to the class at compile time. But what happens when the compiler compiles this piece of code? Here is what the compiler generates for us:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;any&gt;</span></span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> chars<span class="token operator">&gt;</span>
<span class="token keyword">using</span> meta_string <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> chars<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> T <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>chars<span class="token operator">&gt;</span>
<span class="token keyword">inline</span> <span class="token keyword">constexpr</span> meta_string<span class="token operator">&lt;</span>chars<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token string">&quot;&quot;</span><span class="token function">_meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">type_parameter_0_0</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">MetaField</span><span class="token punctuation">;</span>
<span class="token comment">/* First instantiated from: insights.cpp:23 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">INSIGHTS_USE_TEMPLATE</span></span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">MetaField</span><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;1&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
  
  <span class="token keyword">public</span><span class="token operator">:</span> 
  <span class="token keyword">inline</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">const</span> <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// inline constexpr MetaField() noexcept = default;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token comment">/* First instantiated from: insights.cpp:24 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">INSIGHTS_USE_TEMPLATE</span></span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">MetaField</span><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;2&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
  
  <span class="token keyword">public</span><span class="token operator">:</span> 
  <span class="token keyword">inline</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">const</span> <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// inline constexpr MetaField() noexcept = default;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>


<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">char</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>elements<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">MetaField</span><span class="token operator">&lt;</span>meta_string<span class="token operator">&lt;</span>elements<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
  
  <span class="token keyword">public</span><span class="token operator">:</span> 
  <span class="token keyword">inline</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">const</span> <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>elements<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">,</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">;</span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  MetaField<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;1&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> v1 <span class="token operator">=</span> MetaField<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;1&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  MetaField<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;2&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> v2 <span class="token operator">=</span> MetaField<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>integer_sequence<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token char">&#39;m&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;t&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;2&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>cout<span class="token punctuation">,</span> <span class="token string">&quot;v1 metadata: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v1<span class="token punctuation">.</span><span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>cout<span class="token punctuation">,</span> <span class="token string">&quot;v2 metadata: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v2<span class="token punctuation">.</span><span class="token function">getMetaString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, the compiler generated a class for every class instance that has different metadata. One of the pros of this approach (using templates) is it will be fast at runtime, but on the other side, one of the cons is the code size will grow in the case of many template metadata.</p><p>I think it&#39;s enough for today, and I will be back to complete this series as soon as possible.</p></div></div><div class="theme-divider"></div><div class="giscus-comment"><!----></div></div><div class="card-box card-wrapper post-tocs"><header><h3 class="title"><i class="iconfont icon-categorynormal"></i><span> Contents </span></h3></header><nav class="vuepress-toc"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/blog/implementing-go-style-struct-tags-part-1.html#what-do-we-want-to-do" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="What Do We Want To Do?!">What Do We Want To Do?!</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/blog/implementing-go-style-struct-tags-part-1.html#perspective" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="Perspective">Perspective</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/blog/implementing-go-style-struct-tags-part-1.html#implementation" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="Implementation">Implementation</a><!--[--><!--]--></li></ul></nav></div></div></main><footer class="theme-footer theme-common-footer"><div class="copyright"><a class="beian" href="https://the-this-pointer.github.io">With ❤️ From Iran</a><span class="delimiter">|</span><span class="info">Copyright © 2022-2024 Rsomething &lt;Personal Blog/&gt;</span></div></footer><div style="display:none;" class="back-to-top"><i class="iconfont icon-back-to-top"></i></div><!--]--><!--]--></div>
    <script type="module" src="/assets/app.b78311c0.js" defer></script>
  </body>
</html>
